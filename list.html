<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        
const table = document.createElement("table");
table.border = "1";
table.style.width = "100%";
table.style.marginTop = "20px";
table.style.borderCollapse = "collapse";
table.id="tableId";
document.body.appendChild(table);

const thead = document.createElement("thead");
thead.id="thead";
table.appendChild(thead);
const tr1 = document.createElement("tr");
tr1.id="tr1";
thead.appendChild(tr1);
const th1 = document.createElement("th");
th1.id="table1";
th1.textContent="Profile Picture";
tr1.appendChild(th1);
const th2 = document.createElement("th");
th2.id="table1";
th2.textContent="Name";
tr1.appendChild(th2);
const th3 = document.createElement("th");
th3.id="table1";
th3.textContent="Email";
tr1.appendChild(th3);
const th4 = document.createElement("th");
th4.id="table1";
th4.textContent="Mobile Number";
tr1.appendChild(th4);
const th5 = document.createElement("th");
th5.id="table1";
th5.textContent="Date Of Birth";
tr1.appendChild(th5);
const th6 = document.createElement("th");
th6.id="table1";
th6.textContent="Year Of Joining";
tr1.appendChild(th6);
const th7 = document.createElement("th");
th7.id="table1";
th7.textContent="Salary";
tr1.appendChild(th7);
const th8 = document.createElement("th");
th8.id="table1";
th8.textContent="Actions";
tr1.appendChild(th8);
const tbody = document.createElement('tbody');
tbody.id="tbody"
table.appendChild(tbody);


function getEmployees() {
    return JSON.parse(localStorage.getItem("employees") || "[]");
}

function saveEmployees(data) {
    localStorage.setItem("employees", JSON.stringify(data));
}

function renderTable() {
    tbody.innerHTML = "";
    const employees = getEmployees();

    employees.forEach((emp, index) => {
        const tr2 = document.createElement("tr");
        tr2.id="table2";
        tbody.appendChild(tr2);

        const td1 = document.createElement("td")
        const image = document.createElement("img");
        image.src= emp.profile;
        image.style.height = ("50px");
        image.style.objectFit="cover";
        image.style.border="1px solid gray";
        image.style.borderRadius = "3px";
        td1.id="table1";
        td1.appendChild(image);
        tr2.appendChild(td1);

        const td2 = document.createElement("td")
        td2.textContent=emp.name;
        td2.id="table1";
        tr2.appendChild(td2);

        const td3 = document.createElement("td")
        td3.textContent=emp.email;
        td3.id="table1";
        tr2.appendChild(td3)

        const td4 = document.createElement("td")
        td4.textContent=emp.mobile;
        td4.id="table1";
        tr2.appendChild(td4)

        const td5 = document.createElement("td")
        td5.textContent=emp.dob;
        td5.id="table1";
        tr2.appendChild(td5)

        const td6 = document.createElement("td")
        td6.textContent=emp.yoj;
        td6.id="table1";
        tr2.appendChild(td6)

        const td7 = document.createElement("td")
        td7.textContent=emp.salary;
        td7.id="table1";
        tr2.appendChild(td7);

        const actions = document.createElement("td")
        const viewbtn = document.createElement("button");
        viewbtn.onclick=() => viewEmployee(index);
        viewbtn.textContent = "View";
        actions.appendChild(viewbtn);

        const editbtn = document.createElement("button");
        editbtn.onclick= () => editEmployee(index);
        editbtn.textContent = "Edit";
        actions.appendChild(editbtn);
        
        const deletebtn = document.createElement("button");
        deletebtn.onclick= () => deleteEmployee(index);
        deletebtn.textContent = "Delete";
        actions.appendChild(deletebtn);
        tr2.appendChild(actions);
        
    });
}

window.viewEmployee = function (index) {
    const emp = getEmployees()[index];

    alert(`
Employee Details:
----------------------
Name: ${emp.name}
Email: ${emp.email}
Mobile: ${emp.mobile}
DOB: ${emp.dob}
Year of Joining: ${emp.yoj}
Salary: ${emp.salary}
`);
};

window.editEmployee = function (index) {
    localStorage.setItem("editIndex", index);
    window.location.href = "new_Employee_Form.html";
};


window.deleteEmployee = function (index) {
    if (confirm("Are you sure you want to delete this employee?")) {
        let employees = getEmployees();
        employees.splice(index, 1);
        saveEmployees(employees);
        renderTable();
    }
};

renderTable();
    </script>
</body>
</html>